/*******************************************************************************************************************************************
*
* Projekt:    TB20 - MAGPIE (WEIGHING MODULE)
* Datei:      fw_config.h
* 
* Autor:      Marc Bergmann (MB)
*
* Copyright:  2015 Systeme Helmholz GmbH
* 
* Zweck:      Header-File zur Konfiguration der Firmware
*
*******************************************************************************************************************************************/

#ifndef  __FW_CONFIG_H__
#define  __FW_CONFIG_H__

// Allgemeine und Firmware-spezifische Defines (auch relevant fuer die FWIDENT-Daten -> ident.c)

  #if   defined  FW_MAGPIE_RELEASE     // Release-Version

    #define  FW_NAME    "MAGPIE"


  #elif defined  FW_MAGPIE_DEBUG       // Debug-Version

    #define  FW_NAME    "MAGPIE"

    #define  __DEBUG__


  #elif defined  FW_MAGPIE_DIOTEST

    #define  FW_NAME    "MAGPIE_DIOTEST"

    #define  __DEBUG__


  #else
    #error  "Fehlendes Define FW_MAGPIE_...!"
  #endif

// Festlegungen zu den SHIDENT-Daten

#ifdef  __USE_INTERNAL_SHIDENT__

/* SHIDENT-Daten mit in die Firmware kompilieren */ // -> vereinfacht das Debuggen der Firmware bei HSP

#ifdef  FW_MAGPIE_DIOTEST

/* bei Test-FW DIOTEST SHIDENT-Daten von 8xDIO-Modul verwenden */

#define  SHIDENT_MODULE_TYPE        0x0188            // Modultyp des 8xDIO-Moduls
#define  SHIDENT_MODULE_ID          3800              // Modul-ID des 8xDIO-Moduls
#define  SHIDENT_SERIAL_NUMBER      0                 // 0 = verwende eine aus der Controller-ID generierte Seriennummer
#define  SHIDENT_ORDER_NUMBER_STR   "600-230-0AP21"   // Bestellnummer des 8xDIO-Moduls
#define  SHIDENT_HW_REVISION_STR    "HW?"             // unbekannte HW-Revision (nur informativer Inhalt)
#define  SHIDENT_PWMLED_VAL         80                // 80 ist Standardwert fuer die PWM-Ansteuerung der blauen LED

#else

/* ansonsten werden die Werte fuer das Waegemodul verwendet */

#define  SHIDENT_MODULE_TYPE        0x2201            // Modultyp des Waegemoduls
#define  SHIDENT_MODULE_ID          16000             // Modul-ID des Waegemoduls
#define  SHIDENT_SERIAL_NUMBER      0                 // 0 = verwende eine aus der Controller-ID generierte Seriennummer
#define  SHIDENT_ORDER_NUMBER_STR   "600-256-7AA01"   // Bestellnummer des Wägemoduls
#define  SHIDENT_HW_REVISION_STR    "HW?"             // unbekannte HW-Revision (nur informativer Inhalt)
#define  SHIDENT_PWMLED_VAL         80                // 80 ist Standardwert fuer die PWM-Ansteuerung der blauen LED

#endif

#endif


// Defines der Firmware-Version

  // #define  FW_VERSION_MAJOR      -> wird vom Makefile beim Compiler-Aufruf definiert
  // #define  FW_VERSION_MINOR      -> wird vom Makefile beim Compiler-Aufruf definiert
  // #define  FW_VERSION_BETA       -> wird vom Makefile beim Compiler-Aufruf definiert
  
  
// Defines zur Konfiguration der CIS-Bibliothek (auch relevant fuer die FWIDENT-Daten -> ident.c)

  #define   CIS_SETTINGS_HWPLATFORM_LPC11XX_48MHZ       // verwendete Hardware-Plattform des Moduls


#ifdef  FW_MAGPIE_DIOTEST  /////////////////////////////////////////////////////////////////////////////////////////////////////////////////

  // Einstellungen fuer die DIOTEST-Variante der MAGPIE-Firmware

  #define   CIS_SETTINGS_SUPPORTED_FEATURES             ( ( 0 * CIS_FEATURE_BIT_QUARTZ_OSCILLATOR         ) \
                                                        | ( 0 * CIS_FEATURE_BIT_PARAMETERIZABLE           ) \
                                                        | ( 1 * CIS_FEATURE_BIT_CYCLIC_PROCESS_DATA       ) \
                                                        | ( 0 * CIS_FEATURE_BIT_ACYCLIC_PROCESS_DATA      ) \
                                                        | ( 0 * CIS_FEATURE_BIT_DIAGNOSTICS               ) \
                                                        | ( 0 * CIS_FEATURE_BIT_PROCESS_ALARMS            ) \
                                                        | ( 1 * CIS_FEATURE_BIT_COMMAND_INTERFACE_TUNNEL  ) )
                                                        
                                                        // Unterstuetzte Features des Moduls (vorerst fuer FW_MAGPIE_DIOTEST):
                                                        //   Modul hat keinen Quartz-Oszillator
                                                        //   Modul ist nicht parametrierbar
                                                        //   Modul hat zyklische Prozessdaten
                                                        //   Modul hat keine azyklischen Prozessdaten
                                                        //   Modul unterstützt keine Diagnosen
                                                        //   Modul unterstützt keine Prozessalarme
                                                        //   Modul unterstützt Kommandointerface-Tunnel

  #define   CIS_SETTINGS_MAXTIME_READY_FOR_NEXT_RX      280   // maximale Empfangsverzoegerung = 280 * 1/8 us = 35 us
  #define   CIS_SETTINGS_MAXTIME_START_RESPONSE_TX      480   // maximale Sendeverzoegerung = 480 * 1/8 us = 60 us

  #define   CIS_SETTINGS_MAXSIZE_DIAGNOSTIC_DATA          0   // maximale Groesse der Diagnosedaten in Bytes
  #define   CIS_SETTINGS_MAXSIZE_PROC_ALARM_DATA          0   // maximale Groesse der Prozessalarmdaten in Bytes

  #define   CIS_SETTINGS_MAXSIZE_CIO_INPUT_DATA           1   // maximale Groesse der zyklischen Eingangsdaten in Bytes	
  #define   CIS_SETTINGS_MAXSIZE_CIO_OUTPUT_DATA          1   // maximale Groesse der zyklischen Ausgangsdaten in Bytes	
	   
  #define   CIS_SETTINGS_MAXSIZE_PARAM_DATA               0   // maximale Groesse der Parameterdaten in Bytes
                                                        
#else  // !FW_MAGPIE_DIOTEST  //////////////////////////////////////////////////////////////////////////////////////////////////////////////

  // noch anzupassende Einstellungen fuer die eigentliche Waegemodul-Firmware
    
//  #warning  CIS-Einstellungen muessen noch fuer das Waegemodul angepasst werden

  #define   CIS_SETTINGS_SUPPORTED_FEATURES             ( ( 0 * CIS_FEATURE_BIT_QUARTZ_OSCILLATOR         ) \
                                                        | ( 1 * CIS_FEATURE_BIT_PARAMETERIZABLE           ) \
                                                        | ( 1 * CIS_FEATURE_BIT_CYCLIC_PROCESS_DATA       ) \
                                                        | ( 0 * CIS_FEATURE_BIT_ACYCLIC_PROCESS_DATA      ) \
                                                        | ( 1 * CIS_FEATURE_BIT_DIAGNOSTICS               ) \
                                                        | ( 0 * CIS_FEATURE_BIT_PROCESS_ALARMS            ) \
                                                        | ( 1 * CIS_FEATURE_BIT_COMMAND_INTERFACE_TUNNEL  ) )
                                                        
                                                        // Unterstuetzte Features des Moduls:
                                                        //   Modul hat keinen Quartz-Oszillator
                                                        //   Modul ist parametrierbar
                                                        //   Modul hat zyklische Prozessdaten
                                                        //   Modul hat keine azyklischen Prozessdaten
                                                        //   Modul unterstützt Diagnosen
                                                        //   Modul unterstützt keine Prozessalarme
                                                        //   Modul unterstützt Kommandointerface-Tunnel

  #define   CIS_SETTINGS_MAXTIME_READY_FOR_NEXT_RX      280   // maximale Empfangsverzoegerung = 280 * 1/8 us = 35 us
  #define   CIS_SETTINGS_MAXTIME_START_RESPONSE_TX      480   // maximale Sendeverzoegerung = 480 * 1/8 us = 60 us

  #define   CIS_SETTINGS_MAXSIZE_DIAGNOSTIC_DATA          0   // maximale Groesse der Diagnosedaten in Bytes
  #define   CIS_SETTINGS_MAXSIZE_PROC_ALARM_DATA          0   // maximale Groesse der Prozessalarmdaten in Bytes

  #define   CIS_SETTINGS_MAXSIZE_CIO_INPUT_DATA           7   // maximale Groesse der zyklischen Eingangsdaten in Bytes
  #define   CIS_SETTINGS_MAXSIZE_CIO_OUTPUT_DATA          8   // maximale Groesse der zyklischen Ausgangsdaten in Bytes
	   
  #define   CIS_SETTINGS_MAXSIZE_PARAM_DATA              15   // maximale Groesse der Parameterdaten in Bytes

#endif  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////



// Defines zur Konfiguration der Timer- und LED-Bibliothek

  #define   _TIMER_CYCLIC_LPC1114_48_                         // HW-Define fuer die Bibliothek timer_cyclic

  #define   _LED_HW_WZM_                                      // HW-Define fuer die LED-Bibliothek
                                                              

// Weitere Firmware-Defines

  #define   FW_SETTINGS_WATCHDOG_TIMEOUT                100   // Watchdog-Timeout in ms
  
  #define   SH_CRC32                                          // Funktion CRC_crc32() zur CRC32-Berechnung mitkompilieren


#endif
